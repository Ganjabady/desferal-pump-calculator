<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>محاسبه‌گر پمپ دسفرال - Thalapump 20</title>
    <style>
        body { font-family: Tahoma, sans-serif; background: #eef5ff; margin: 0; padding: 20px; }
        .container { max-width: 420px; margin: 20px auto; background: white; padding: 25px; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        h2 { color: #2c3e50; margin-top: 0; }
        label { display: block; margin: 15px 0 8px; font-weight: bold; color: #34495e; }
        input, select { width: 100%; padding: 12px; border: 1px solid #bdc3c7; border-radius: 8px; font-size: 16px; box-sizing: border-box; }
        .time-row { display: flex; gap: 10px; }
        .time-row select { flex: 1; }
        button { margin-top: 20px; background: #27ae60; color: white; padding: 14px; border: none; border-radius: 8px; font-size: 18px; cursor: pointer; }
        button:hover { background: #219a52; }
        #result { margin-top: 25px; padding: 15px; background: #f8fff8; border-radius: 10px; font-size: 18px; line-height: 1.8; border: 2px solid #27ae60; }
        .error { color: #e74c3c; font-weight: bold; }
    </style>
</head>
<body>
    <div class="container">
        <h2>محاسبه‌گر پمپ دسفرال</h2>
        <p style="color:#7f8c8d">مدل Thalapump 20 Micrel</p>

        <label>سرعت پمپ (mm/h)</label>
        <input type="number" id="speed" step="0.1" placeholder="مثلاً 6 یا 8" value="6">

        <label>طول سرنگ (mm)</label>
        <input type="number" id="length" step="1" placeholder="مثلاً 75" value="75">

        <label>زمان شروع تزریق</label>
        <div class="time-row">
            <select id="startHour">
                <option value="20">۲۰</option>
                <option value="21">۲۱</option>
                <option value="22" selected>۲۲</option>
                <option value="23">۲۳</option>
                <option value="0">۰۰ (۱۲ شب)</option>
                <option value="1">۰۱</option>
                <!-- تا ۱۹ هم می‌تونی اضافه کنی، فعلاً شب‌ها رو گذاشتم چون اکثر بچه‌ها شب می‌زنن -->
                <option value="2">۰۲</option>
                <option value="3">۰۳</option>
                <option value="4">۰۴</option>
                <option value="5">۰۵</option>
                <option value="6">۰۶</option>
                <option value="7">۰۷</option>
                <option value="8">۰۸</option>
                <option value="9">۰۹</option>
            </select>
            <select id="startMinute">
                <option value="0" selected>۰۰</option>
                <option value="10">۱۰</option>
                <option value="15">۱۵</option>
                <option value="20">۲۰</option>
                <option value="30">۳۰</option>
                <option value="40">۴۰</option>
                <option value="45">۴۵</option>
                <option value="50">۵۰</option>
            </select>
        </div>

        <button onclick="calculate()">محاسبه کن</button>

        <div id="result"></div>
    </div>

    <script>
        function calculate() {
            const speed = parseFloat(document.getElementById('speed').value);
            const length = parseFloat(document.getElementById('length').value);
            const startHour = parseInt(document.getElementById('startHour').value);
            const startMinute = parseInt(document.getElementById('startMinute').value);

            const resultDiv = document.getElementById('result');

            if (!speed || !length || speed <= 0) {
                resultDiv.innerHTML = '<p class="error">لطفاً سرعت و طول سرنگ رو درست وارد کن!</p>';
                return;
            }

            // محاسبه زمان تزریق (ساعت اعشاری)
            const durationHours = length / speed;

            const totalMinutes = Math.round(durationHours * 60); // دقیق‌تر
            const hours = Math.floor(totalMinutes / 60);
            const minutes = totalMinutes % 60;

            // محاسبه زمان پایان
            let endHour = startHour + hours;
            let endMinute = startMinute + minutes;

            if (endMinute >= 60) {
                endHour += Math.floor(endMinute / 60);
                endMinute = endMinute % 60;
            }
            endHour = endHour % 24;

            // تبدیل به فرمت ۱۲ ساعته فارسی
            const period = endHour < 12 ? 'صبح' : 'عصر';
            const displayHour = endHour % 12 || 12;

            resultDiv.innerHTML = `
                <strong>زمان کل تزریق:</strong><br>
                ${hours} ساعت و ${minutes.toString().padStart(2,'0')} دقیقه<br><br>
                <strong>زمان تقریبی پایان:</strong><br>
                ساعت ${displayHour}:${endMinute.toString().padStart(2,'0')} ${period}
            `;
        }

        // اولین بار هم خودش محاسبه کنه (با مقادیر پیش‌فرض)
        window.onload = calculate;
    </script>
</body>
</html>
